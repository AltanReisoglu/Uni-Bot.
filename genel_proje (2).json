{
  "name": "genel_proje",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "authentication": "n8nUserAuth",
        "initialMessages": "Merhaba ben Uni. Bot.CerrahpaÅŸa ve YTÃœ iÃ§in Ã¶zel olarak eÄŸitilen bir asistanÄ±m.",
        "options": {
          "allowFileUploads": true,
          "inputPlaceholder": "Herhangi bir ÅŸey sor.",
          "showWelcomeScreen": true,
          "subtitle": "Senin asistanÄ±n.",
          "title": "Uni. Bot.",
          "responseMode": "lastNode"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -304,
        -128
      ],
      "id": "cd6690cc-0259-40b0-ae5d-8cb29fa781c4",
      "name": "When chat message received",
      "webhookId": "cae69a20-a2be-470d-9592-5be8b7b45da6"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.chatInput }}.",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "# Rol  \nSen, Ä°stanbul Ãœniversitesi - CerrahpaÅŸa ve YÄ±ldÄ±z Teknik Ãœniversitesi Ã¶ÄŸrencilerine yardÄ±mcÄ± olmak iÃ§in tasarlanmÄ±ÅŸ bir **akademik sohbet asistanÄ±sÄ±n**. GÃ¶revin, Ã¶ÄŸrencilerin akademik ve idari konularla ilgili merak ettikleri sorulara doÄŸru, aÃ§Ä±klayÄ±cÄ± ve yardÄ±msever cevaplar vermektir.\n\n---\n\n# KullanÄ±cÄ± Profili  \nKullanÄ±cÄ±larÄ±n Ã§oÄŸu Ä°stanbul Ãœniversitesi - CerrahpaÅŸa Ã¶ÄŸrencileridir.  \nSana genellikle ÅŸu konularda sorular soracaklardÄ±r:\n- Ders iÃ§erikleri  \n- SÄ±nav tarihleri  \n- FakÃ¼lte kurallarÄ±  \n- KampÃ¼s yaÅŸamÄ±  \n- Ä°dari iÅŸlemler  \nYanÄ±tlarÄ±nda daima aÃ§Ä±k, gÃ¼venilir ve yol gÃ¶sterici olmalÄ±sÄ±n.\n\n---\n\n# Dil  \nTÃ¼m konuÅŸmalar ve yanÄ±tlar **TÃ¼rkÃ§e** olmalÄ±dÄ±r.  \nGerektiÄŸinde teknik terimleri basit bir dille aÃ§Ä±klamalÄ±sÄ±n.\n\n---\n\n# KonuÅŸma TarzÄ±  \n- YardÄ±msever, sabÄ±rlÄ± ve Ã¶ÄŸretici bir Ã¼slup kullan  \n- Asla resmi ya da mesafeli bir ton kullanma  \n- Gerekirse Ã¶rneklerle anlatÄ±m yap  \n\n---\n\n# AraÃ§lar  \nAÅŸaÄŸÄ±daki araÃ§lara eriÅŸimin var. Her birini yalnÄ±zca ilgili durumlarda kullanmalÄ±sÄ±n:\n\n---\n\n### âœ… `fine_tuned`  \nBu aracÄ±, Ã¼niversite hayatÄ± ile ilgili *esprili, deneyimli ve Ã¶ÄŸrenci yorumlarÄ±na dayalÄ±* bilgi Ã§ekmek iÃ§in kullan.  \n- Ã–zellikle sÄ±k sorulan sorular bu veri kÃ¼mesinde yer alabilir.  \n- Bu araÃ§tan gelen yanÄ±tlarÄ± *biraz dÃ¼zenleyerek*, aÃ§Ä±klama ekleyip kullanÄ±cÄ±ya aktarabilirsin.\n\n---\n\n### âœ… `rag`  \nBu aracÄ±, dÄ±ÅŸ dokÃ¼mantasyonlardan (ders notlarÄ±, fakÃ¼lte yÃ¶netmelikleri, resmi web siteleri vb.) bilgi almak iÃ§in kullan.  \n- **Nesnel**, **belgelere dayalÄ±** bilgi gerektiren durumlarda tercih edilmelidir.\n\n---\n\n### âœ… `calculator`  \nBu aracÄ±, not hesaplama, yÃ¼zdelik iÅŸlemler ya da diÄŸer matematiksel analizler iÃ§in kullan.  \n- Ã–rneÄŸin: \"Vizeden 70 aldÄ±m, finalden kaÃ§ almalÄ±yÄ±m?\"\n\n---\n\n### âœ… `sent_mail`  \nBu aracÄ±, kullanÄ±cÄ± bir e-posta gÃ¶ndermek istediÄŸinde kullan.  \n- KullanÄ±cÄ±dan ÅŸu bilgileri al:  \n  - `to`  \n  - `subject`  \n  - `message`  \n\n- Bu verileri ÅŸu JSON formatÄ±nda **hiÃ§bir kontrol veya aÃ§Ä±klama eklemeden** doÄŸrudan `sent_mail` aracÄ±na gÃ¶nder:\n\n```json\n{\n  \"to\": \"hedef@domain.com\",\n  \"subject\": \"Konu baÅŸlÄ±ÄŸÄ±\",\n  \"message\": \"Mesaj iÃ§eriÄŸi buraya yazÄ±lÄ±r.\"\n}\n---\n\n###  `video_analyzer`  \nBu aracÄ±, sunum, eÄŸitim veya bilgilendirici videolarÄ±n Ã¶zetini Ã§Ä±karmak iÃ§in kullan.  \n- **AmaÃ§:** KullanÄ±cÄ±nÄ±n video iÃ§eriÄŸini hÄ±zlÄ±ca anlamasÄ±nÄ± saÄŸlamak  \n- **Dikkat:** Ã–zetler *tarafsÄ±z* ve *bilgilendirici* olmalÄ±dÄ±r.  \n- **SpekÃ¼latif veya yorum iÃ§eren aÃ§Ä±klamalardan kaÃ§Ä±nÄ±lmalÄ±dÄ±r.**\n\n---\n##insert_member\nBu aracÄ±, kullanÄ±cÄ± bir Ã¶ÄŸrenci kulÃ¼bÃ¼ne katÄ±lmak istediÄŸinde veya kulÃ¼pler hakkÄ±nda soru sorduÄŸunda kullan.\n\nKullanÄ±cÄ±dan ÅŸu bilgileri al:\n\nname\n\nemail\n\nclub\n\nBu bilgileri aÅŸaÄŸÄ±daki JSON formatÄ±nda doÄŸrudan insert_member aracÄ±na gÃ¶nder:\n\n{\n  \"name\": \"Ad Soyad\",\n  \"email\": \"kullanici@ogrenci.edu.tr\",\n  \"club\": \"KulÃ¼p AdÄ±\",\n  \"timestamp\": \"2025-08-05T14:45:00Z\"\n}\n\n# Tarih ve Saat: {{ $now }}\n",
          "maxIterations": 10,
          "returnIntermediateSteps": true,
          "passthroughBinaryImages": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.1,
      "position": [
        272,
        -128
      ],
      "id": "da75260d-531a-4e6b-8a1d-32bb379d8f2e",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "session",
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -16,
        176
      ],
      "id": "ed33106e-c597-424c-949e-4ec7e29a2be4",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "options": {
          "safetySettings": {
            "values": [
              {
                "category": "HARM_CATEGORY_HARASSMENT"
              },
              {
                "category": "HARM_CATEGORY_HATE_SPEECH",
                "threshold": "BLOCK_ONLY_HIGH"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -96,
        80
      ],
      "id": "fbc361ec-fa47-42fb-9527-f94296c2b2d8",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "35c3e9bZE8n3ZyCl",
          "name": "Google Gemini(PaLM) Api account 2"
        }
      }
    },
    {
      "parameters": {
        "toolDescription": "Bu araÃ§, yalnÄ±zca aÅŸaÄŸÄ±daki konularla ilgili sorular geldiÄŸinde kullanÄ±lmalÄ±dÄ±r:\n\nEÄŸitim geÃ§miÅŸi\n\nKariyer planlamasÄ±\n\nAkademik geÃ§miÅŸ\n\nDiploma ve sertifikalar\n\nMesleki deneyim\n\nÄ°ÅŸ arama sÃ¼reÃ§leri\n\nAkademik Hayat\n\nKullanÄ±cÄ±nÄ±n {{ $json.chatInput }} iÃ§inde yukarÄ±daki alanlarla ilgili bir sorgusu varsa bu araÃ§ aktif hale gelmelidir. DiÄŸer tÃ¼m konularda bu araÃ§ devre dÄ±ÅŸÄ± bÄ±rakÄ±lmalÄ±dÄ±r.\n\nBu araÃ§la verilen yanÄ±tlar, model tarafÄ±ndan yalnÄ±zca Ã§ok kÃ¼Ã§Ã¼k dÃ¼zeltmelerle, orijinal cevaba sadÄ±k kalÄ±narak kullanÄ±cÄ±ya sunulmalÄ±dÄ±r. Gereksiz deÄŸiÅŸikliklerden kaÃ§Ä±nÄ±lmalÄ±dÄ±r.",
        "method": "POST",
        "url": "https://us-central1-aiplatform.googleapis.com/v1/projects/246624734452/locations/us-central1/endpoints/2397466412667895808:generateContent",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "googleOAuth2Api",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"contents\": [\n    {\n      \"role\": \"user\",\n      \"parts\": [\n        {\n          \"text\": \"Bana Ã¼niversite Ã¶ÄŸrencisi iÃ§in akademik tavsiyeler verir misin?\"\n        }\n      ]\n    }\n  ],\n  \"generationConfig\": {\n    \"temperature\": 0.7,  \n    \"topP\": 0.95,\n    \"maxOutputTokens\": 8192\n  },\n  \"safetySettings\": [\n    {\n      \"category\": \"HARM_CATEGORY_HATE_SPEECH\",\n      \"threshold\": \"BLOCK_NONE\"\n    },\n    {\n      \"category\": \"HARM_CATEGORY_DANGEROUS_CONTENT\",\n      \"threshold\": \"BLOCK_NONE\"\n    },\n    {\n      \"category\": \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\n      \"threshold\": \"BLOCK_NONE\"\n    },\n    {\n      \"category\": \"HARM_CATEGORY_HARASSMENT\",\n      \"threshold\": \"BLOCK_NONE\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        96,
        256
      ],
      "id": "1b182d86-7659-4f1c-8b15-eef92f6272f4",
      "name": "fined_tuned",
      "executeOnce": false,
      "credentials": {
        "googleOAuth2Api": {
          "id": "kBUHo4Sg5c1T5Qy0",
          "name": "Google account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "typeVersion": 1,
      "position": [
        208,
        368
      ],
      "id": "29db1449-8236-47b7-8e55-053fb5e3b5e5",
      "name": "Calculator"
    },
    {
      "parameters": {
        "description": "call this tool to send email someone.",
        "workflowId": {
          "__rl": true,
          "value": "ldSJsYAZj1QawzIV",
          "mode": "list",
          "cachedResultName": "gmail agent"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        288,
        464
      ],
      "id": "84ce3582-813e-420e-a7ae-c6284cfff653",
      "name": "sent mail"
    },
    {
      "parameters": {
        "description": "\nBu aracÄ±, Ã¼niversiteye ait dÃ¶kÃ¼manlar, ders notlarÄ±, yÃ¶netmelikler, akademik takvimler veya diÄŸer dÄ±ÅŸ kaynaklardan bilgi almak iÃ§in kullanÄ±lÄ±r..  \nKullanÄ±cÄ±nÄ±n sorduÄŸu konu hakkÄ±nda mevcut bilgin yetersizse veya gÃ¼ncel/veriye dayalÄ± bir aÃ§Ä±klama gerekiyorsa bu aracÄ± devreye al.  \nYanÄ±t Ã¼retmeden Ã¶nce ilgili metni geri getirir ve ardÄ±ndan kullanÄ±cÄ±ya aÃ§Ä±klayÄ±cÄ± bir cevap oluÅŸturursun.\n\nğŸ§  KullanÄ±m SenaryolarÄ±:  \n- Ders iÃ§eriÄŸi veya kaynak not sorgulama  \n- FakÃ¼lte yÃ¶netmeliÄŸi maddesi Ã¶ÄŸrenme  \n- Akademik takvimde tarih bulma  \n- DÄ±ÅŸ kaynaklÄ± aÃ§Ä±klamalÄ± bilgi gerektiren konular\n\nâ— Dikkat:  \nGeri getirilen bilginin doÄŸruluÄŸunu kontrol et ve sadece baÄŸlama uygun kÄ±smÄ±nÄ± kullanarak cevap Ã¼ret."
      },
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "typeVersion": 1.1,
      "position": [
        496,
        144
      ],
      "id": "c3f8c2b9-612d-4782-96be-1013b787f27b",
      "name": "rag"
    },
    {
      "parameters": {
        "pineconeIndex": {
          "__rl": true,
          "value": "ragbot3",
          "mode": "list",
          "cachedResultName": "ragbot3"
        },
        "options": {
          "pineconeNamespace": "ragbot"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        416,
        384
      ],
      "id": "68b6ca84-ab00-41a8-934c-9cbb2381720b",
      "name": "Pinecone Vector Store",
      "credentials": {
        "pineconeApi": {
          "id": "nYmOykDiXDuVyhTH",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [
        512,
        512
      ],
      "id": "d7e888a7-a3fb-42d4-a4e3-cd6f0c0c8318",
      "name": "Embeddings Google Gemini",
      "credentials": {
        "googlePalmApi": {
          "id": "35c3e9bZE8n3ZyCl",
          "name": "Google Gemini(PaLM) Api account 2"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "This tool analyze and transcribe video",
        "resource": "video",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-1.5-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-1.5-flash"
        },
        "videoUrls": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('URL_s_', ``, 'string') }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGeminiTool",
      "typeVersion": 1,
      "position": [
        912,
        304
      ],
      "id": "549a9111-3ae1-488f-913d-666d9e30f75e",
      "name": "video_analyze",
      "credentials": {
        "googlePalmApi": {
          "id": "35c3e9bZE8n3ZyCl",
          "name": "Google Gemini(PaLM) Api account 2"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        736,
        432
      ],
      "id": "ac586c71-f6d9-48d5-8859-4735908df17e",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "35c3e9bZE8n3ZyCl",
          "name": "Google Gemini(PaLM) Api account 2"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "fined_tuned": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Calculator": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "sent mail": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "rag": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store": {
      "ai_vectorStore": [
        [
          {
            "node": "rag",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Google Gemini": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "video_analyze": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "rag",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "03c93e58-e2a3-434c-a22a-2843234f805a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "00a79498d5c3b6198959ad17059856730a8757021dcc9d1d8d2b7724f00d4bf4"
  },
  "id": "ipwh6vZ0pDptaTjm",
  "tags": []
}